# Шпаргалка по Git
## Навигация 
- pwd (**p**rint **w**orking **d**irectory) - покажи, в какой я папке
- ls - покажи файлы и папки в текущей директории
- ls -a - покажи также скрытые файлы и папки, названия которых начинаются с символа .
- cd <название папки> - перейди в папку <название папки>
- cd .. - перейди на уровень выше, в родительскую папку
- cd ~ - перейди в домашнюю директорию
- cd / - перейди в корневую директорию
## Работа с файлами и папками
### Создание
- touch file.txt - создать файл file.txt в текущей папке
- touch file1.txt file2.txt -  если нужно создать сразу несколько файлов, можно напечатать их имена в одну строку через пробел
- mkdir new-directory - создать папку с именем new-directory в текущей папке

### Копирование и перемещение
- cp file.txt ~/my-dir - скопируй файл в папку my-dir
- mv file.txt ~/my dir - перемести файл или папку в папку my-dir

### Чтение и запись
- cat file.txt - распечатай содержимое текстового файла file.txt
- echo "Привет!" - выведет в консоль то, что передали в качестве параметра (Привет!)
- echo "Вторая строка" >> file.txt - допишет строку "Вторая строка" в файл file.txt
- echo "Вторая строка" > file.txt - сделает тоже самое, что и предыдущая команда, но перед этим сотрет все содержимое файла

### Удаление
- rm file.txt - удали файл file.txt
- rmdir my-dir - удали папку my-dir
- rm -r my-dir - удали папку my-dir и все, что она содержит

## Полезные возможности
- Команды можно указывать списком, разделив двумя амперсандами (&&)
- У консоли есть собственная память - буфер с несколькими последними командами. По ним можно перемещаться с помощью стрелок вверх (↑) и вниз (↓)
- Можно не вводить название файла или папки полностью. Можно набрать первые символы и дважды нажать Tab. Если файл или папка есть в текущей директории, командная строка сама допишет путь.

## Инициализация репозитория
- git init - инициализируй репозиторий в текущей папке
- rm -rf .git - "разгитить" текущую папку

## Синхронизация локального и удаленного репозиториев
- git remote add origin URL-репозитория - привяжи локальный репозиторий к удаленному репозиторию с указанным URL
- git remote -v - проверить, что репозитории связаны
- git remote rm origin - удалить текущий привязанный origin
- git push -u origin main - первый раз загрузи коммиты локального репозитория из ветки main в удаленный репозиторий
- git push - загрузи коммиты в удаленный репозиторий после того, как он был привязан с помощью флага -u
- git pull - подтянуть изменения из удаленного репозитория в локальный

## Подготовка файла к коммиту
- git add file.txt - подготовь файл file.txt к коммиту
- git add --all - подготовь к коммиту все файлы, в которых были изменения, и все новые файлы
- git add . - подготовь к коммиту текущую папку и все файлы в ней

## Создание и публикация коммита 
- git commit -m 'Описание коммита' - сделай коммит и добавь описание, чтобы было понятно, какие были сделаны изменения
- git push - добавь изменения в удаленный репозиторий

## Просмотр информации о коммитах
- git log - выведи подробную историю коммитов
- git log --oneline - выведи краткую информацию о коммитах: сокращенный хэш и сообщение

## Просмотр состояния файлов
- git status - покажи текущее состояние репозитория
- git status --ignored - покажи текущее состоянии репозитория с игнорируемыми файлами
- Существует 4 состояния статуса файла: 
    - untracked
    - tracked
    - staged
    - modified

## Добавления изменений в последний коммит
- git commit --amend --no-edit - добавь изменения к последнему коммиту и оставь сообщение прежним
- git commit --amend -m 'Новое сообщение' - измени сообщение к последнему коммиту на "Новое сообщение"

## Откат файлов и коммитов
- git restore --staged file.txt - переведи файл file.txt обратно в состояние untracked или modified
- git restore --staged . - «сбросить» все файлы из staged обратно в untracked/modified
- git restore file.txt - верни файл file.txt к последней версии, которая была сохранена через git commit или git add
- git reset --hard <хэш коммита> - удали все незакоммиченные изменения из staging и "рабочей зоны" вплоть до указанного коммита

## Просмотр изменений
- git diff - покажи изменения в "рабочей зоне", то есть в modified-файлах
- git diff <хэш коммита 1> <хэш коммита 2> - покажи изменения между двумя указанными коммитами
- git diff --staged - покажи изменения, которые добавлены в staged-файлах
- git diff main feature/my-feature - покажет изменения между основной веткой и веткой feature/my-feature
- git diff main~3 main - покажет изменения между тем коммитом, что был три коммита назад, и текущим

## Клонирование репозитория
- git clone git@github.com:KonneyJ/git-cheat-sheet.git - создаст копию удаленного репозитория на компьютере. Автоматически связывает локальный и удаленный репозитории

## Работа с ветками
- git branch - посмотреть, какие ветки есть в проекте и в какой ветке вы находитесь сейчас (отмечена звездочкой *)
- git branch -a - посмотреть все ветки: и локальные, и удаленные 
- git branch <название ветки> - создать новую ветку
- git checkout <название ветки> - переключить на другую ветку
- git checkout -b <название ветки> - создать новую ветку и сразу переключиться на нее

## Слияние и удаление веток
- git merge <название ветки> - добавление коммитов из ветки <название ветки> в текущую ветку, в которой сейчас находитесь. Перед выполнением команды нужно перейти в ту ветку, куда будете добавлять изменения
- git branch -D <название ветки> - удаление ветки
- git branch -d <название ветки> - более безопасный вариант, удалит ветку только если она была полностью объединена с другой - то есть если две ветки стали (или были изначально) частью одной истории
- Удаление локальной ветки через Git не удаляет ветку на GitHub

## Игнорирование файлов в Git

Чтобы Git игнорировал файлы и не пытался добавить их в репозиторий, нужно создать файл .gitignore и записать в него названия игнорируемых файлов. 

Правила из .gitignore применяются только к новым (untracked) файлам. Если файл уже попал в staging area или коммит, то правила на него не распространяются.

- Комментарии 

Если строка начинается с #, то это комментарий и .gitignore не будет его учитывать
```Bash
# вот так можно писать комментарии;
# они ничего не значат для .gitignore,
# но они могут быть полезны, чтобы понять, зачем было добавлено то или иное правило
```

- Просто название файла

Если нужно чтобы Git игнорировал все файлы .DS_Store, для этого нужно добавить строку с названием файла в .gitignore
```Bash
# для macOS
.DS_Store
```

- Звездочка (*)

Символ звездочки (*) соответствует любой строке, включая пустую. При использовании такого символа в шаблоне в .gitignore, файл будет проигнорирован вне зависимости от того, что будет на месте звездочки.
```Bash
# игнорировать все файлы, которые заканчиваются на .jpeg
*.jpeg

# игнорировать все файлы "tmp" во всех подпапках папки docs
docs/*/tmp
```

- Вопросительный знак (?)

Вопросительный знак соответствует одному любому символу.
```Bash
file?.txt
```
Файлы file1.txt or fileA.txt будут проигнорированы, а файл file12.txt нет.

- Квадратные скобки []

Квадратные скобки, как и восклицательный знак, соответствуют одному любому символу, но не любому, а только из списка, что указан в скобках. В скобках можно либо перечислить символы ([abc]), либо задать диапазон ([a-z]).
```Bash
# игнорировать файлы file0.txt, file1.txt и file2.txt
# при этом не игнорировать file3.txt, file4.txt, ...
file[0-2].txt
```

- Слэш (/)

Косая черта или слэш указывает на каталоги. Git проигнорирует файлы или папки только в корневой директории.
```Bash
# игнорировать todo.txt в корне репозитория
/todo.txt

# для сравнения: spam.txt будет игнорироваться во всех папках
spam.txt
```
Файл todo.txt в корневом каталоге будет проигнорирован. При этом, например, файл subdir/todo.txt по-прежнему отслеживается.
Если шаблон заканчивается слешем, то правило применится только к папке.
```Bash
# игнорировать папку build
build/
```
Если build - это папка, то она будет проигнорирована. Если это обычный файл - то он не попадет под правило и не будет игнорироваться.

- Парные звездочки (**)

Парные звездочки похожи на одинарную звездочку, отличие в работе с вложенными папками. Двойная звездочка может соответствовать любому количеству таких папок (в том числе нулю), а одинарная - только одной.
```Bash
# игнорировать файлы "docs/current/tmp", "docs/old/tmp",
# а также "docs/old/saved/a/b/c/d/tmp"
# и даже "docs/tmp", потому что ноль вложенных папок тоже подходит
docs/**/tmp

# игнорировать только "docs/current/tmp" и "docs/old/tmp"
# файл "docs/old/saved/a/b/c/d/tmp" не попадает в правило
docs/*/tmp
```

- Восклицательный знак (!)

Любое правило в .gitignore можно инвертировать с помощью восклицательного знака.
```Bash
# игнорировать все JPEG-файлы
*.jpeg

# но только не мем с Doge
!doge.jpeg
```